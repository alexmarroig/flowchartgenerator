{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://example.com/schemas/process-schema.json",
  "title": "Process Schema",
  "type": "object",
  "required": ["metadata", "nodes", "edges"],
  "properties": {
    "metadata": {
      "type": "object",
      "required": ["name", "version", "createdAt", "updatedAt", "author"],
      "properties": {
        "name": { "type": "string", "minLength": 1 },
        "version": { "type": "string", "minLength": 1 },
        "createdAt": { "type": "string", "format": "date-time" },
        "updatedAt": { "type": "string", "format": "date-time" },
        "author": { "type": "string", "minLength": 1 },
        "description": { "type": "string" }
      },
      "additionalProperties": false
    },
    "nodes": {
      "type": "array",
      "minItems": 1,
      "items": {
        "type": "object",
        "required": ["id", "type", "label"],
        "properties": {
          "id": { "type": "string", "minLength": 1 },
          "type": { "type": "string", "enum": ["start", "task", "decision", "end"] },
          "label": { "type": "string", "minLength": 1 },
          "owner": { "type": "string" },
          "slaHours": { "type": "number", "minimum": 0 },
          "estimatedMinutes": { "type": "number", "minimum": 0 }
        },
        "additionalProperties": false
      }
    },
    "edges": {
      "type": "array",
      "minItems": 1,
      "items": {
        "type": "object",
        "required": ["id", "source", "target"],
        "properties": {
          "id": { "type": "string", "minLength": 1 },
          "source": { "type": "string", "minLength": 1 },
          "target": { "type": "string", "minLength": 1 },
          "label": { "type": "string" }
        },
        "additionalProperties": false
      }
    }
  },
  "additionalProperties": false,
  "examples": [
    {
      "metadata": {
        "name": "Aprovação de Pedido",
        "version": "1.0",
        "createdAt": "2024-01-10T09:00:00Z",
        "updatedAt": "2024-01-10T09:00:00Z",
        "author": "Equipe de Processos"
      },
      "nodes": [
        { "id": "start_1", "type": "start", "label": "Início" },
        { "id": "task_1", "type": "task", "label": "Registrar pedido", "owner": "Atendimento" },
        { "id": "decision_1", "type": "decision", "label": "Pedido aprovado?", "owner": "Gerente" },
        { "id": "task_2", "type": "task", "label": "Emitir nota", "owner": "Financeiro", "slaHours": 24 },
        { "id": "end_1", "type": "end", "label": "Fim" }
      ],
      "edges": [
        { "id": "edge_1", "source": "start_1", "target": "task_1" },
        { "id": "edge_2", "source": "task_1", "target": "decision_1" },
        { "id": "edge_3", "source": "decision_1", "target": "task_2", "label": "Sim" },
        { "id": "edge_4", "source": "decision_1", "target": "end_1", "label": "Não" },
        { "id": "edge_5", "source": "task_2", "target": "end_1" }
      ]
    }
  ]
}
